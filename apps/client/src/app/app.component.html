<div class="flex flex-column h-screen" *ngrxLet="authStatus$ as authStatus">
  <p-menubar class="flex-grow-0">
    <ng-template pTemplate="start" class="ml-8">
      <span class="ml-5"></span>
      <img class="h-4rem cursor-pointer" src="placeholder-logo.png" alt="logo" routerLink="/" />
    </ng-template>
    <ng-template pTemplate="end">
      <div class="flex align-items-center gap-2" *ngIf="authStatus !== null">
        @if (authStatus === 0) {
        <p-button (onClick)="showSignInDialog()" label="Sign In" outlined="false" text="true" />
        <p-button label="Sign Up" outlined="true" routerLink="signup" />
        } @else {
        <p-button label="Home" icon="pi pi-home" severity="secondary" routerLink="" text="true" />
        <p-button label="Profile" icon="pi pi-user" severity="secondary" routerLink="/profile" text="true" />
        }
        <span class="mr-5"></span>
      </div>
    </ng-template>
  </p-menubar>
  <div class="flex-grow-1 overflow-hidden flex">
    <div class="h-full flex-grow-0">
      @if (authStatus !== 0) {
      <div class="p-card p-component p-4 w-15rem h-full flex flex-column justify-content-between">
        <div class="flex flex-column row-gap-2">
          @if(isAdmin$ | async) {
          <p-button label="Dashboard" icon="pi pi-chart-bar" severity="secondary" styleClass="w-full text-left"
            routerLink="/dashboard" />
          <p-button label="Images" icon="pi pi-images" severity="secondary" styleClass="w-full text-left"
            routerLink="/images" />
          } @else {
          <p-button label="Appointments" icon="pi pi-list" severity="secondary"
            styleClass="w-full text-left white-space-nowrap" routerLink="appointments" />

          <p-button label="My Participations" icon="pi pi-list-check" severity="secondary"
            styleClass="w-full text-left white-space-nowrap p-overlay-badge overflow-visible"
            routerLink="my-participations">
            <p-badge *ngIf="unseenChanges$ | async as count" [value]="count" severity="danger" />
          </p-button>
          <p-button label="My Sports" icon="pi pi-globe" severity="secondary"
            styleClass="w-full text-left white-space-nowrap" routerLink="my-sports" />
          }
        </div>
        <app-profile-summary></app-profile-summary>
      </div>
      }
    </div>
    <div class="h-full flex-grow-1 overflow-hidden">
      <router-outlet></router-outlet>
    </div>
  </div>

  <p-toast key="global" position="bottom-right"></p-toast>

  <p-sidebar [(visible)]="participationSidebarService.visible" position="right" styleClass="w-30rem">
    <ng-template pTemplate="header">
      <h1 class="font-lighter m-0">Participants</h1>
    </ng-template>
    <app-participants></app-participants>
  </p-sidebar>
</div>

<p-confirmDialog />